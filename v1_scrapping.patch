Subject: [PATCH] v1 scrapping
---
Index: .idea/aws.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/aws.xml b/.idea/aws.xml
new file mode 100644
--- /dev/null	(date 1771626911324)
+++ b/.idea/aws.xml	(date 1771626911324)
@@ -0,0 +1,17 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="accountSettings">
+    <option name="activeProfile" value="profile:default" />
+    <option name="activeRegion" value="eu-central-1" />
+    <option name="recentlyUsedProfiles">
+      <list>
+        <option value="profile:default" />
+      </list>
+    </option>
+    <option name="recentlyUsedRegions">
+      <list>
+        <option value="eu-central-1" />
+      </list>
+    </option>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/vcs.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/vcs.xml b/.idea/vcs.xml
new file mode 100644
--- /dev/null	(date 1771626911324)
+++ b/.idea/vcs.xml	(date 1771626911324)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="VcsDirectoryMappings">
+    <mapping directory="" vcs="Git" />
+  </component>
+</project>
\ No newline at end of file
Index: go.sum
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/go.sum b/go.sum
new file mode 100644
--- /dev/null	(date 1771627171426)
+++ b/go.sum	(date 1771627171426)
@@ -0,0 +1,16 @@
+github.com/go-rod/rod v0.116.2 h1:A5t2Ky2A+5eD/ZJQr1EfsQSe5rms5Xof/qj296e+ZqA=
+github.com/go-rod/rod v0.116.2/go.mod h1:H+CMO9SCNc2TJ2WfrG+pKhITz57uGNYU43qYHh438Mg=
+github.com/ysmood/fetchup v0.3.0 h1:UhYz9xnLEVn2ukSuK3KCgcznWpHMdrmbsPpllcylyu8=
+github.com/ysmood/fetchup v0.3.0/go.mod h1:hbysoq65PXL0NQeNzUczNYIKpwpkwFL4LXMDEvIQq9A=
+github.com/ysmood/goob v0.4.0 h1:HsxXhyLBeGzWXnqVKtmT9qM7EuVs/XOgkX7T6r1o1AQ=
+github.com/ysmood/goob v0.4.0/go.mod h1:u6yx7ZhS4Exf2MwciFr6nIM8knHQIE22lFpWHnfql18=
+github.com/ysmood/gop v0.2.0 h1:+tFrG0TWPxT6p9ZaZs+VY+opCvHU8/3Fk6BaNv6kqKg=
+github.com/ysmood/gop v0.2.0/go.mod h1:rr5z2z27oGEbyB787hpEcx4ab8cCiPnKxn0SUHt6xzk=
+github.com/ysmood/got v0.40.0 h1:ZQk1B55zIvS7zflRrkGfPDrPG3d7+JOza1ZkNxcc74Q=
+github.com/ysmood/got v0.40.0/go.mod h1:W7DdpuX6skL3NszLmAsC5hT7JAhuLZhByVzHTq874Qg=
+github.com/ysmood/gotrace v0.6.0 h1:SyI1d4jclswLhg7SWTL6os3L1WOKeNn/ZtzVQF8QmdY=
+github.com/ysmood/gotrace v0.6.0/go.mod h1:TzhIG7nHDry5//eYZDYcTzuJLYQIkykJzCRIo4/dzQM=
+github.com/ysmood/gson v0.7.3 h1:QFkWbTH8MxyUTKPkVWAENJhxqdBa4lYTQWqZCiLG6kE=
+github.com/ysmood/gson v0.7.3/go.mod h1:3Kzs5zDl21g5F/BlLTNcuAGAYLKt2lV5G8D1zF3RNmg=
+github.com/ysmood/leakless v0.9.0 h1:qxCG5VirSBvmi3uynXFkcnLMzkphdh3xx5FtrORwDCU=
+github.com/ysmood/leakless v0.9.0/go.mod h1:R8iAXPRaG97QJwqxs74RdwzcRHT1SWCGTNqY8q0JvMQ=
Index: go.mod
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/go.mod b/go.mod
new file mode 100644
--- /dev/null	(date 1771627171426)
+++ b/go.mod	(date 1771627171426)
@@ -0,0 +1,16 @@
+module github.com/Boughris-Abdelmalek/web-scrapping-a-sa7bi
+
+go 1.25.7
+
+// Due to https://github.com/go-rod/rod/issues/1195
+replace github.com/ysmood/fetchup => github.com/ysmood/fetchup v0.3.0
+
+require github.com/go-rod/rod v0.116.2
+
+require (
+	github.com/ysmood/fetchup v0.2.3 // indirect
+	github.com/ysmood/goob v0.4.0 // indirect
+	github.com/ysmood/got v0.40.0 // indirect
+	github.com/ysmood/gson v0.7.3 // indirect
+	github.com/ysmood/leakless v0.9.0 // indirect
+)
Index: Makefile
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/Makefile b/Makefile
new file mode 100644
--- /dev/null	(date 1771627471814)
+++ b/Makefile	(date 1771627471814)
@@ -0,0 +1,2 @@
+run-rod-show:
+	go run main.go . -rod=show,devtools
\ No newline at end of file
Index: .idea/.gitignore
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/.gitignore b/.idea/.gitignore
new file mode 100644
--- /dev/null	(date 1771626855591)
+++ b/.idea/.gitignore	(date 1771626855591)
@@ -0,0 +1,8 @@
+# Default ignored files
+/shelf/
+/workspace.xml
+# Editor-based HTTP Client requests
+/httpRequests/
+# Datasource local storage ignored files
+/dataSources/
+/dataSources.local.xml
Index: .idea/copilot.data.migration.ask2agent.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/copilot.data.migration.ask2agent.xml b/.idea/copilot.data.migration.ask2agent.xml
new file mode 100644
--- /dev/null	(date 1771626911322)
+++ b/.idea/copilot.data.migration.ask2agent.xml	(date 1771626911322)
@@ -0,0 +1,6 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="Ask2AgentMigrationStateService">
+    <option name="migrationStatus" value="COMPLETED" />
+  </component>
+</project>
\ No newline at end of file
Index: .idea/modules.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/modules.xml b/.idea/modules.xml
new file mode 100644
--- /dev/null	(date 1771626911320)
+++ b/.idea/modules.xml	(date 1771626911320)
@@ -0,0 +1,8 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<project version="4">
+  <component name="ProjectModuleManager">
+    <modules>
+      <module fileurl="file://$PROJECT_DIR$/.idea/web-scrapping-a-sa7bi.iml" filepath="$PROJECT_DIR$/.idea/web-scrapping-a-sa7bi.iml" />
+    </modules>
+  </component>
+</project>
\ No newline at end of file
Index: .idea/web-scrapping-a-sa7bi.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/.idea/web-scrapping-a-sa7bi.iml b/.idea/web-scrapping-a-sa7bi.iml
new file mode 100644
--- /dev/null	(date 1771626911320)
+++ b/.idea/web-scrapping-a-sa7bi.iml	(date 1771626911320)
@@ -0,0 +1,9 @@
+<?xml version="1.0" encoding="UTF-8"?>
+<module type="WEB_MODULE" version="4">
+  <component name="Go" enabled="true" />
+  <component name="NewModuleRootManager">
+    <content url="file://$MODULE_DIR$" />
+    <orderEntry type="inheritedJdk" />
+    <orderEntry type="sourceFolder" forTests="false" />
+  </component>
+</module>
\ No newline at end of file
Index: main.go
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
diff --git a/main.go b/main.go
new file mode 100644
--- /dev/null	(date 1771628445968)
+++ b/main.go	(date 1771628445968)
@@ -0,0 +1,88 @@
+package main
+
+import (
+	"fmt"
+	"github.com/go-rod/rod"
+	"github.com/go-rod/rod/lib/launcher"
+	"net/url"
+	"os"
+	"time"
+)
+
+const (
+	BookingLink = "https://www.booking.com/hotel/fr/hotelfrancais.fr.html?aid=311984&label=hotel-50298-fr-FiL6EYFft2PxTc2lRRg2LwS162155423944%3Apl%3Ata%3Ap1%3Ap2%3Aac%3Aap%3Aneg%3Afi%3Atikwd-351816081071%3Alp9207452%3Ali%3Adec%3Adm%3Appccp%3DUmFuZG9tSVYkc2RlIyh9YTQUGSsRwx9_3qo3uPTHyoo&sid=b945786d9ef83f9832fba8a61eee38d7&dest_id=-1456928&dest_type=city&dist=0&group_adults=2&group_children=0&hapos=1&hpos=1&no_rooms=1&req_adults=2&req_children=0&room1=A%2CA&sb_price_type=total&sr_order=popularity&srepoch=1771626391&srpvid=8fa59dc7ccaf01a4&type=total&ucfs=1&"
+
+	// UserDataDir Create a new dir for rod to store user data in there.
+	userDataDir = "/Users/malik/Documents/rod-chrome-data"
+	profileDir  = "Profile 1"
+)
+
+func main() {
+	u := launcher.NewUserMode().
+		UserDataDir(userDataDir).
+		ProfileDir(profileDir).
+		Headless(false)
+
+	wsURL := u.MustLaunch()
+
+	browser := rod.New().
+		ControlURL(wsURL).
+		MustConnect()
+
+	defer browser.MustClose()
+
+	// It's often safer to use browser.MustPage("") then navigate
+	page := browser.MustPage("")
+	page.MustSetViewport(1920, 1080, 1, false)
+
+	pageUrl, err := preparePageURL(BookingLink, "fr", "fr")
+	if err != nil {
+		_, _ = fmt.Fprintf(os.Stderr, "error parsing the page: %v", err)
+	}
+
+	page.MustNavigate(pageUrl)
+
+	hotelName, err := getPlaceName(page)
+	if err != nil {
+		stdErr(err)
+		return
+	}
+
+	fmt.Printf("Hotel name: %s", hotelName)
+	//fmt.Printf("Hotel description: %s", hotelDesc)
+
+	time.Sleep(time.Hour * 1)
+}
+
+func getPlaceName(page *rod.Page) (string, error) {
+	h1, err := page.Element("div#hp_hotel_name")
+	if err != nil {
+		return "", fmt.Errorf("failed to get hotel name: %w", err)
+	}
+
+	h1Text, err := h1.Text()
+	if err != nil {
+		return "", fmt.Errorf("failed to get hotel name text: %w", err)
+	}
+
+	return h1Text, nil
+}
+
+func stdErr(err error) {
+	_, _ = fmt.Fprintf(os.Stderr, err.Error())
+}
+
+func preparePageURL(val, language, location string) (string, error) {
+	u, err := url.Parse(val)
+	if err != nil {
+		return "", fmt.Errorf("failed parsing the url: %v", err)
+	}
+
+	q := u.Query()
+	q.Set("hl", language)
+	q.Set("gl", location)
+
+	u.RawQuery = q.Encode()
+
+	return u.String(), nil
+}
